{"version":3,"file":"godmode-interface-browser.element-Don4b7T6.js","sources":["../../../assets/src/workspace/godmode/views/godmode-interface-browser.element.ts"],"sourcesContent":["import { customElement, html, css, state, repeat } from \"@umbraco-cms/backoffice/external/lit\";\r\nimport { UmbLitElement } from \"@umbraco-cms/backoffice/lit-element\";\r\nimport { DirectionModel, GodModeService, NameValue, TypeMap } from \"../../../api\";\r\nimport { tryExecuteAndNotify } from \"@umbraco-cms/backoffice/resources\";\r\nimport { UUISelectEvent } from \"@umbraco-cms/backoffice/external/uui\";\r\nimport { sortData } from \"../../../helpers/sort\";\r\nimport { UmbTableColumn, UmbTableConfig, UmbTableElement, UmbTableItem, UmbTableOrderedEvent } from \"@umbraco-cms/backoffice/components\";\r\n\r\n@customElement('godmode-interface-browser')\r\nexport class GodModeInterfaceBrowserElement extends UmbLitElement {\r\n\r\n    @state()\r\n    private _tableConfig: UmbTableConfig = {\r\n        allowSelection: false,\r\n        hideIcon: true\r\n    }\r\n\r\n    @state()\r\n    private _tableColumns: Array<UmbTableColumn> = [\r\n        {\r\n            name: 'Implemented By',\r\n            alias: 'name',\r\n            allowSorting: true\r\n        },\r\n        {\r\n            name: 'Namespace',\r\n            alias: 'namespace',\r\n            allowSorting: true\r\n        },\r\n        {\r\n            name: 'Module',\r\n            alias: 'module',\r\n            allowSorting: true\r\n        },\r\n        {\r\n            name: 'Base Type',\r\n            alias: 'baseType',\r\n            allowSorting: true\r\n        }\r\n    ];\r\n\r\n    @state()\r\n    private _tableItems: Array<UmbTableItem> = [];\r\n\r\n    @state()\r\n    assemblies: Array<NameValue> = [];\r\n\r\n    @state()\r\n    assemblyOptions: Array<Option> = [];\r\n\r\n    @state()\r\n    currentAssembly: NameValue | undefined = undefined;\r\n\r\n    @state()\r\n    currentAssemblyOption: string = '';\r\n\r\n    @state()\r\n    interfaces: Array<TypeMap> = [];\r\n\r\n    @state()\r\n    interfaceOptions: Array<Option> = [];\r\n\r\n    @state()\r\n    currentInterface: TypeMap | undefined = undefined;\r\n\r\n    @state()\r\n    currentInterfaceOption: string = '';\r\n\r\n    @state()\r\n    types: Array<TypeMap> = [];\r\n\r\n    constructor() {\r\n        super();\r\n        this.#loadAssemblies();\r\n    }\r\n\r\n    #sortingHandler(event: UmbTableOrderedEvent) {\r\n        const table = event.target as UmbTableElement;\r\n        const orderingColumn = table.orderingColumn as keyof TypeMap;\r\n        const orderingDesc = table.orderingDesc;\r\n\r\n        this.types = sortData(this.types, orderingColumn, orderingDesc ? DirectionModel.DESCENDING : DirectionModel.ASCENDING);\r\n        this._tableItems = this.#mapData(this.types);\r\n    }\r\n\r\n    async #loadAssemblies() {\r\n        const { data } = await tryExecuteAndNotify(this, GodModeService.getUmbracoManagementApiV1GodModeGetAssemblies());\r\n\r\n        if (data) {\r\n            this.assemblies = data;\r\n\r\n            this.assemblyOptions = this.assemblies.map((assembly) => ({ name: assembly.name, value: assembly.name }));\r\n            this.assemblyOptions.unshift({ name: 'Please select', value: '' })\r\n        }\r\n    }\r\n\r\n    async #getInterfaces(event: UUISelectEvent) {\r\n        this.currentAssemblyOption = event.target.value as string;\r\n\r\n        if (this.currentAssemblyOption !== '') {\r\n            this.currentAssembly = this.assemblies.find(x => x.name === this.currentAssemblyOption);\r\n\r\n            const { data } = await tryExecuteAndNotify(this, GodModeService.getUmbracoManagementApiV1GodModeGetInterfacesFrom({ assembly: this.currentAssemblyOption }));\r\n\r\n            if (data) {\r\n                this.interfaces = data;\r\n\r\n                this.interfaceOptions = this.interfaces.map((int) => ({ name: int.name, value: int.name }));\r\n                this.interfaceOptions.unshift({ name: 'Please select', value: '' });\r\n            }\r\n        }\r\n        else {\r\n            this.currentAssembly = undefined;\r\n            this.currentInterface = undefined;\r\n            this.currentInterfaceOption = '';\r\n            this.interfaces = [];\r\n            this.interfaceOptions = [];\r\n        }\r\n    }\r\n\r\n    async #getTypes(event: UUISelectEvent) {\r\n        this.currentInterfaceOption = event.target.value as string;\r\n\r\n        if (this.currentInterfaceOption !== '') {\r\n            this.currentInterface = this.interfaces.find(x => x.name === this.currentInterfaceOption);\r\n\r\n            if (this.currentInterface) {\r\n                const { data } = await tryExecuteAndNotify(this, GodModeService.getUmbracoManagementApiV1GodModeGetTypesAssignableFrom({ baseType: this.currentInterface.loadableName }));\r\n\r\n                if (data) {\r\n                    this.types = data;\r\n                    this._tableItems = this.#mapData(this.types);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this.currentInterface = undefined;\r\n            this.types = [];\r\n        }\r\n    }\r\n\r\n    #mapData(data: TypeMap[]): UmbTableItem[] {\r\n        return data.map((data) => {\r\n            return {\r\n                id: data.name,\r\n                data: [\r\n                    {\r\n                        columnAlias: 'name',\r\n                        value: data.name\r\n                    },\r\n                    {\r\n                        columnAlias: 'namespace',\r\n                        value: data.namespace\r\n                    },\r\n                    {\r\n                        columnAlias: 'module',\r\n                        value: data.module\r\n                    },\r\n                    {\r\n                        columnAlias: 'baseType',\r\n                        value: data.baseType\r\n                    }\r\n                ]\r\n            }\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return html`\r\n      <umb-body-layout>\r\n        <godmode-header name=\"Interface Browser\" slot=\"header\"></godmode-header>\r\n\r\n        <uui-box>\r\n          <div class=\"grid\">\r\n              <div>\r\n                  <uui-label for=\"search-assembly\">Assembly:</uui-label>\r\n                  <uui-select\r\n                      id=\"search-assembly\"\r\n                      .options=${this.assemblyOptions}\r\n                      @change=${this.#getInterfaces}\r\n                      .value=${this.currentAssemblyOption}>\r\n                  </uui-select>\r\n              </div>\r\n              ${this.currentAssemblyOption !== '' ?\r\n                html`\r\n                  <div>\r\n                      <uui-label for=\"search-interface\">Interface:</uui-label>\r\n                      <uui-select\r\n                          id=\"search-interface\"\r\n                          .options=${this.interfaceOptions}\r\n                          @change=${this.#getTypes}\r\n                          .value=${this.currentInterfaceOption}>\r\n                      </uui-select>\r\n                  </div>\r\n              ` : html``\r\n            }\r\n          </div>\r\n        </uui-box>\r\n\r\n        ${this.currentAssemblyOption === '' ?\r\n                html`\r\n            <uui-box>Please select an Assembly (above) and then the Interface you wish to browse. You will then see all types that implement the Interface.</uui-box>\r\n          `\r\n                :\r\n                html`\r\n            <h5>${this.currentAssembly?.value}</h5>\r\n\r\n            ${this.types.length !== 0 ?\r\n                        html`\r\n                <uui-box style=\"--uui-box-default-padding: 0;\">\r\n                  ${this._tableItems.length !== 0 ?\r\n                                html`\r\n                        <uui-box style=\"--uui-box-default-padding: 0;\">\r\n                            <umb-table .config=${this._tableConfig} .columns=${this._tableColumns} .items=${this._tableItems} @ordered=${this.#sortingHandler} />\r\n                        </uui-box>\r\n                    ` : html``}\r\n                </uui-box>\r\n              ` : html``\r\n                    }\r\n          `\r\n            }\r\n      </umb-body-layout>\r\n    `\r\n    }\r\n\r\n    static styles = [\r\n        css`\r\n        .grid {\r\n            display: grid;\r\n            grid-template-columns: repeat(3, 1fr);\r\n            gap: 20px;\r\n\r\n            div {\r\n                display: flex;\r\n                flex-direction: column;\r\n                align-items: flex-start;\r\n            }\r\n        }\r\n\r\n        uui-box {\r\n            margin-bottom: 20px;\r\n        }\r\n\r\n        uui-table-head-cell button {\r\n            padding: var(--uui-size-4) var(--uui-size-5);\r\n            background-color: transparent;\r\n            color: inherit;\r\n            border: none;\r\n            cursor: pointer;\r\n            font-family: var(--uui-font-family);\r\n            font-weight: inherit;\r\n            font-size: inherit;\r\n            display: inline-flex;\r\n            align-items: center;\r\n            justify-content: space-between;\r\n            width: 100%;\r\n        }\r\n    `\r\n    ]\r\n}\r\n\r\nexport default GodModeInterfaceBrowserElement;\r\n\r\ndeclare global {\r\n    interface HTMLElementTagNameMap {\r\n        'godmode-interface-browser': GodModeInterfaceBrowserElement;\r\n    }\r\n}\r\n"],"names":["_sortingHandler","sortingHandler_fn","_loadAssemblies","loadAssemblies_fn","_getInterfaces","getInterfaces_fn","_getTypes","getTypes_fn","_mapData","mapData_fn","GodModeInterfaceBrowserElement","UmbLitElement","__privateAdd","__privateMethod","html","_a","event","table","orderingColumn","orderingDesc","sortData","DirectionModel","data","tryExecuteAndNotify","GodModeService","assembly","x","int","css","__decorateClass","state","customElement","GodModeInterfaceBrowserElement$1"],"mappings":"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"}